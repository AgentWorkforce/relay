---
title: "Quickstart"
description: "Get up and running with Agent Relay in 5 minutes"
---

This guide will have you running your first multi-agent network in under 5 minutes.

## Prerequisites

Before you begin, ensure you have:

- **Node.js** 18 or higher
- At least one AI CLI installed ([Claude](https://docs.anthropic.com/en/docs/claude-cli), [Codex](https://github.com/openai/codex), or [Gemini](https://github.com/google-gemini/gemini-cli))
- A **Relaycast API key** (set `RELAY_API_KEY` in your environment, or the broker will create a workspace on first run)

## Installation

Install the SDK as a project dependency:

```bash
npm install @agent-relay/sdk
```

The SDK ships with the `agent-relay` Rust binary bundled. No separate installation step is needed.

## Step-by-Step Setup

<Steps>
  <Step title="Create a script">
    Create a file called `orchestrate.ts`:

    ```typescript
    import { AgentRelay } from "@agent-relay/sdk";

    const relay = new AgentRelay();

    // Listen for incoming messages
    relay.onMessageReceived = (msg) => {
      console.log(`[${msg.from} -> ${msg.to}] ${msg.text}`);
    };

    // Listen for lifecycle events
    relay.onAgentSpawned = (agent) => {
      console.log(`Agent spawned: ${agent.name} (${agent.runtime})`);
    };

    // Spawn a Codex agent
    const worker = await relay.codex.spawn({ name: "Worker" });

    // Send a message from a human source
    const human = relay.human({ name: "System" });
    await human.sendMessage({
      to: worker.name,
      text: "Hello from the quickstart!",
    });

    // List all agents
    const agents = await relay.listAgents();
    for (const agent of agents) {
      console.log(`  ${agent.name} runtime=${agent.runtime}`);
    }

    // Clean up
    await worker.release();
    await relay.shutdown();
    ```
  </Step>

  <Step title="Run it">
    ```bash
    npx tsx orchestrate.ts
    ```

    You should see output showing the agent spawn, message delivery, and clean shutdown.
  </Step>
</Steps>

## Using the High-Level API

The `AgentRelay` class is the recommended entry point. It manages the broker lifecycle and provides a clean facade.

### Spawn agents by provider

```typescript
const codex  = await relay.codex.spawn();   // Spawns a Codex PTY worker
const claude = await relay.claude.spawn();  // Spawns a Claude PTY worker
const gemini = await relay.gemini.spawn();  // Spawns a Gemini PTY worker
```

### Spawn with custom options

```typescript
const worker = await relay.spawnPty({
  name: "Backend",
  cli: "codex",
  args: ["--model", "gpt-4.1"],
  channels: ["backend"],
});
```

### Event hooks

```typescript
relay.onMessageReceived = (msg) => { /* incoming message */ };
relay.onMessageSent     = (msg) => { /* outgoing message */ };
relay.onAgentSpawned    = (agent) => { /* agent started */ };
relay.onAgentReleased   = (agent) => { /* agent released */ };
relay.onAgentExited     = (agent) => { /* agent process exited */ };
```

## Using the Low-Level Client

For advanced use cases, use `AgentRelayClient` directly:

```typescript
import { AgentRelayClient } from "@agent-relay/sdk";

const client = await AgentRelayClient.start();

// Spawn a PTY worker
const result = await client.spawnPty({
  name: "Worker",
  cli: "claude",
  args: ["--dangerously-skip-permissions"],
});

// Listen for events
const unsub = client.onEvent((event) => {
  if (event.kind === "relay_inbound") {
    console.log(`${event.from}: ${event.body}`);
  }
});

// Send a message
await client.sendMessage({ to: "Worker", text: "Start working" });

// List agents
const agents = await client.listAgents();

// Shut down
await client.shutdown();
```

## What Just Happened?

When you called `new AgentRelay()` and spawned an agent:

1. The SDK spawned the `agent-relay` Rust binary in **broker mode** (`agent-relay init`)
2. The broker connected to Relaycast over WebSocket for message transport
3. On `relay.codex.spawn()`, the broker launched a **PTY worker** wrapping the Codex CLI
4. Messages flowed through Relaycast channels, delivered to agents via the broker

No daemon process to start. No socket files to manage. The SDK handles everything.

## Next Steps

<CardGroup cols={2}>
  <Card title="Core Concepts" icon="book" href="/concepts">
    Learn about the broker, workers, Relaycast, and the protocol.
  </Card>
  <Card title="Messaging" icon="messages" href="/features/messaging">
    Explore messaging patterns: DMs, broadcasts, channels, and threads.
  </Card>
  <Card title="Agent Spawning" icon="users" href="/features/spawning">
    Learn about PTY workers, headless agents, and lifecycle management.
  </Card>
  <Card title="SDK Reference" icon="code" href="/reference/sdk">
    Full API reference for AgentRelay and AgentRelayClient.
  </Card>
</CardGroup>
