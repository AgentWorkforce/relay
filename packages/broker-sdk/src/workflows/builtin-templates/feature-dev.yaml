version: "1.0"
name: feature-dev
description: "Full feature development lifecycle with planning, implementation, review, and release."
swarm:
  pattern: hub-spoke
  maxConcurrency: 2
  timeoutMs: 3600000
  channel: swarm-feature-dev
agents:
  - name: lead
    cli: claude
    role: "Lead engineer coordinating delivery"
  - name: planner
    cli: codex
    role: "Plans implementation and acceptance criteria"
    interactive: false
  - name: developer
    cli: codex
    role: "Implements planned changes"
    interactive: false
  - name: reviewer
    cli: claude
    role: "Reviews code quality and release risk"
workflows:
  - name: feature-delivery
    description: "Plan, implement, review, and finalize a feature request."
    onError: retry
    steps:
      - name: plan
        agent: planner
        task: |
          Analyze the feature request and produce a concrete implementation plan:
          {{task}}
        retries: 1
        verification:
          type: output_contains
          value: PLAN_COMPLETE
      - name: implement
        agent: developer
        dependsOn: [plan]
        task: |
          Implement the approved plan:
          {{steps.plan.output}}
        retries: 1
        verification:
          type: output_contains
          value: IMPLEMENTATION_COMPLETE
      - name: review
        agent: reviewer
        dependsOn: [implement]
        task: |
          Review implementation quality, correctness, and test coverage:
          {{steps.implement.output}}
        verification:
          type: output_contains
          value: REVIEW_COMPLETE
      - name: finalize
        agent: lead
        dependsOn: [review]
        task: |
          Summarize decisions and ship readiness for the feature.
        verification:
          type: output_contains
          value: DONE
coordination:
  barriers:
    - name: delivery-ready
      waitFor: [plan, implement, review]
      timeoutMs: 900000
state:
  backend: memory
  ttlMs: 86400000
  namespace: feature-dev
errorHandling:
  strategy: retry
  maxRetries: 2
  retryDelayMs: 5000
  notifyChannel: swarm-feature-dev
